name: Compilar Todas las Tareas
on: [push]

jobs:
  build_latex:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout c√≥digo
        uses: actions/checkout@v4

      - name: Compilar Tareas
        uses: xu-cheng/latex-action@v3
        with:
          root_file: Tarea_*/main.tex
          
          glob_root_file: true
          
          latexmk_use_lualatex: false 

      - name: Renombrar PDFs (Opcional pero recomendado)
        run: |
          for dir in Tarea_*; do
            if [ -f "$dir/main.pdf" ]; then
              mv "$dir/main.pdf" "$dir.pdf"
              echo "Generado: $dir.pdf"
            fi
          done

      - name: Subir todos los PDFs
        uses: actions/upload-artifact@v4
        with:
          name: Tareas_Compiladas
          path: "*.pdf"
          if-no-files-found: ignore
